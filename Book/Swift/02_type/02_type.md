#2장 타입 선택

대다수 객체지향 프로그래밍 언어에서 객체의 청사진으로 참조 타입인 클래스를 생성함

스위프트는 다른 객체지향 언어와 달리 구조체에 클래스와 동일한 기능이 많고 값 타입이다.

애플은 구조체를 사용할 것을 권장하는데 그 이유를 알아보고 여러 타입의 장단점을 알아보자.

스위프트는 타입을 이름 있는 타입과 복합 타입으로 분류함

이름 있는 타입은 클래스, 구조체, 열거형, 프로토콜 뿐 아니라 스위프트 표준 라이브러리에 배열, 셋, 딕셔너리 등도 포함되는구나

다른 언어의 원시 타입을 스위프트에서는 구조체를 사용해 구현해 놓았기 때문에 확장을 사용해 타입의 행위를 확장 할 수 있다. 이는 이런 이름 있는 타입을 확장 하는 능력은 프로토콜 지향 언어가 갖는 특징. 그래서 String을 extension해서 쓸 수 있었구나

복합 타입은 함수(클로저, 함수, 메소드)와 튜플이 있다. 함수와 메소드차이가 뭐지? 우선 함수는 여러 문장들이 하나의 기능을 하도록 구성 한 것인데 이게 클래스 내부에 정의되면 메소드라고 불림

튜플 타입은 예전에 본 적 있는데 (prop1, prop2, …) 같은 형식이었음

typealias는 복합 타입에 별칭을 부여해 별칭으로 호출 할 수 있도록 해주는구나. 이름 있는 타입은 안되나보다.

타입은 다시 두가지 범주로 나뉨. 참조 타입과 값 타입. 클래스는 참조 타입이기 때문에 변수에 인스턴스를 할당하면 스택 영역에는 인스턴스가 참조하고 있는 메모리의 주소가 할당되고 실제 데이터는 힙 영역에 할당됨. 변수를 복사하면 같은 가리키는 주소가 복사되기 때문에 원본과 복사본이 같은 인스턴스를 공유하게 됨. 구조체는 값 타입이기 때문에 변수에 인스턴스를 할당 하면 스택 영역에 값이 할당됨. 변수를 복사하면 원본에 영향을 주지 않는 복사본이 생성됨

클래스 외 구조체, 열거형, 튜플 등이 값타입에 속함

즉 스위프트에서 모든 타입은 이름 있는 타입 / 복합 타입 중 하나 이면서 프로토콜을 제외하고는 참조 타입 / 값 타입 중 하나임.(프로토콜은 인스턴스 생성 불가하니까)

## 클래스

클래스는 객체의 프로퍼티와 메소드, 생성자를 단일 타입으로 캡슐화 해주는 일종의 구성체구나

클래스는 이름 있는 타입이면서 참조 타입이기도 하다.

## 구조체

애플이 값 타입을 선호하라고 하는데 실제로 스위프트 표준 라이브러리를 보면 구조체를 사용해서 타입 대부분을 구현함. 이게 가능한 건 구조체가 클래스와 유사한 점이 많기 때문

따라서 구조체 역시 인스턴스의 프로퍼티와 메소드, 생성자를 단일 타입으로 캡슐화 해주는 일종의 구성체라고 정의할 수 있음

구조체는 클래스와 다르게 생성자를 정의하지 않으면 기본 생성자를 제공한다.

구조체는 값 타입이기 때문에 인스턴스 내부 메소드에서 구조체 프로퍼티 값을 변경하려면 mutating키워드를 사용해야함

클래스와 차이점은 값 타입이라는 것

## 접근 제어

접근 제어는 내부 코드를 외부의 접근으로 부터 제한한다.

접근제어자 키워드는 외부에서 내부 프로퍼티나 메소드 그리고 생성자에 접근 할 수 있는 단계를 부여 함

다섯 가지의 단계가 있다.

Open : 외부 모듈에서 접근 가능하며 상속이나 오버라이딩 또한 가능

Public : 외부 모듈에서 접근 가능

Internal(default) : 모듈 내부 어디서든 접근 가능

Fileprivate : 해당 파일 내부에서만 접근 가능

Private : 정의된 범위 내에서만 접근 가능

접근제어 시 제한 사항이 있는데 상위 요소보다 하위 요소가 더 높은 접근 수준을 가질 수 없다는 것.

ex) 메소드에서 인자나 반환 타입의 접근 단계가 private인 경우 외부코드가 private에 접근 할 수 없기 때문에 해당 메소드는 public으로 설정 할 수 없음

클래스의 접근 단계가 private인 경우 메소드나 프로퍼티의 접근 단계를 public으로 설정 할 수 없음

## 열거형

대부분 언어에서는 요소라 불리는 이름 있는 값으로 구성된 데이터 타입에 지나지 않지만

스위프트 열거형은 기능 면에서 클래스와 구조체에 가까운 속성을 지니고 있다.

열거형을 클래스나 구조체처럼 사용 할 수 있다는 말인지? 그래서 이점이 뭔지 알아보자

일반적인 사용 예

```swift
enum Devices {
	case Ipod
	case Iphone
	case Ipad
}
```

1. 각 값에 원시 값(raw values)을 부여 할 수 있다.

```swift
enum Devices {
	case IPod = "iPod"
	case IPhone = "iPhone"
	case IPad = "iPad"
}

Devices.IPod.rawValue // "iPod"
```

1. 케이스값 옆에 연관 값(associated values)를 저장 할 수 있다. 케이스 타입에 정보를 추가 저장 할 수 있게 됨

```swift
enum Devices {
	case Ipod(model: Int, year: Int, memory: Int)
	case Iphone(model: String, memory: Int)
	case Ipad(model: String, memory: Int)
}

//연관 값 저장하기
var myPhone = Devices.IPhone(model: "iPhone13pro", memory: 256)
var myTablet = Devices.IPad(model: "air", memory: 1024)

switch myPhone {
	case .IPod(let model, let year, let memory):
		print("iPod: \(model) \(memory)") //연관 값 가져오기
	case .IPhone(let model, let memory):
		print("iPhone: \(model) \(memory)") // "iPhone: iPhone13pro 256"
	case .IPad(let mode, let memory):
		print("iPad: \(model) \(memory)")
}
```

1. 클래스나 구조체처럼 연산 프로퍼티나 생성자 또는 메소드를 가질 수 있다.

```swift
Playground에 작성
```

연산 프로퍼티를 사용 하면 번거로운 연관 값 검색을 닷 문법으로 쉽게 할 수 있다.

메소드를 추가해서 다른 인스턴스와의 상호작용도 처리할 수 있다.

스위프트의 열거형은 다른 언어의 열거형 보다 강력하지만 클래스와 구조체를 완전히 대체할 순 없다. 열거형은 여전히 이름 있는 값을 갖은 유한한 셋으로 구성된 데이터 타입이라는 한계가 있기 때문에

열거형도 구조체처럼 이름 있는 타입이고 값 타입이다.

## 튜플

튜플이 저평가된 타입 중 하나라는데 왜일까?

튜플은 유한하며, 쉼표로 구분하는 순서 있는 요소의 목록이다. (valueA, valueB, valueC)?

튜플의 사용 예를 보자

```swift
// 이름 없는 튜플
let myProtein = ("choco", 23) // 튜플 생성
let (flavor, content) = myProtein // 패턴 매칭
print("\(flavor) \(content)")  // 튜플 내부 정보 접근
```

튜플로 묶을때 각각 값에 flavor, content라는 이름을 부여 해서 내부 정보 접근 할 때 이 이름을 쓸 수 있음

```swift
//이름 있는 튜플 (패턴 매칭 필요 없이 쉽게 값을 가져올 수 있음)
let myProtein2 = (flavor: "choco", content: 23)
print("\(myProtein2.flavor) \(myProtein2.content)")
```

함수에서 여러 값을 반환 하는 경우 튜플을 반환 타입으로 사용 할 수 있다.

```swift
func calculateTip(billAmount: Double, tipPercent: Double) 
-> (tipAmount: Double, totalAmount: Double) {
	let tip = billAmount * (tipPercent/100)
	let total = billAmount + tip
	return (tipAmount: tip, totalAmount: total) //튜플로 반환
}

var tip = calculateTip(billAmount: 97000.0, tipPercent: 10)
print("\(tip.tipAmount) \(tip.totalAmount)") //튜플 내부 정보 접근
```

위와 같이 튜플은 임의의 컬렉션 값을 전달 할 때 유용함

튜플을 값 타입이며 이름이 있기도, 없기도 한 복합 타입이기도 하다

```swift
typealias AliasTuple = (tipAmount: Double, total: Double) //별칭 부여

let myTuple: AliasTuple = (93000.0, 100200.0)
```

## 프로토콜

프로토콜은 실제로 인스턴스를 생성 할 수 없다. 구현 요구 사항을 정의 해 놓은 약속임

하지만 프로토콜은 타입으로 사용 할 수 있음. 변수, 상수, 튜플, 컬렉션 등의 타입을 정의 하는 경우 해당 타입에 프로토콜을 사용 할 수 있다.

프로토콜은 인스턴스를 생성 할 수 없으므로 값 타입도 참조 타입도 아니다.

두 타입의 차이를 알아보자.

## 값 타입과 참조 타입

값 타입(구조체, 열거형, 튜플)과 참조 타입(클래스)의 몇 가지 차이 점 중 주된 차이점은 인스턴스가 전달되는 방식이다.

값 타입 인스턴스를 전달 하는 경우 원본의 복사본을 전달함. 그래서 한 인스턴스가 변경 되더라도 다른 인스턴스에는 영향을 끼치지 않는다.

참조 타입 인스턴스를 전달하는 경우 원본 인스턴스의 참조를 전달함. 두 참조가 같은 인스턴스를 가리키고 있기 때문에 한 **참조가 변경**되면 다른 참조에 영향을 끼친다.

참조란 메모리에 접근 할 수 있는 주소 같은거라고 알고 있었는데 인스턴스가 아니라 참조가 변경된다고 하네 계속 읽어보자

두 타입의 차이점을 알고 각각의 장점과 사용 시 주의 사항을 알아보자